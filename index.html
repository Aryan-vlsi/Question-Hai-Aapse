<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Valentine?</title>

<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

<style>
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  height: 100vh;
  font-family: 'Pacifico', cursive;
  background: url("Background.jpg") center/cover no-repeat;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  color: #b30059;
  -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
}

.page {
  text-align: center;
  display: none;
  padding: 20px;
  width: 100%;
  max-width: 600px;
}

.page.active {
  display: block;
}

.main-text {
  font-size: clamp(28px, 6vw, 56px);
  line-height: 1.3;
  animation: float 3s ease-in-out infinite;
}

.small {
  font-size: 12px;
  opacity: 0.4;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

/* BUTTON CONTAINER - Responsive */
.buttons {
  margin-top: 30px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: clamp(15px, 5vw, 40px); /* Responsive gap */
  position: relative;
  height: 160px;
  transition: opacity 1s ease;
  flex-wrap: wrap; /* Stack on very small screens if needed */
}

/* BASE BUTTON STYLES - Responsive sizing */
button {
  font-family: 'Pacifico', cursive;
  border: none;
  border-radius: 999px;
  padding: clamp(12px, 3vw, 16px) clamp(24px, 6vw, 36px); /* Responsive padding */
  font-size: clamp(18px, 4vw, 22px); /* Responsive font size */
  cursor: pointer;
  white-space: nowrap;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  touch-action: manipulation; /* Better touch response */
  user-select: none; /* Prevent text selection on touch */
  -webkit-user-select: none;
}

/* YES BUTTON */
#yesBtn {
  position: relative;
  z-index: 10;
  background: linear-gradient(45deg, #ff4d6d, #ff758f);
  color: white;
  box-shadow: 0 0 20px rgba(255, 77, 109, 0.7);
}

#yesBtn:hover,
#yesBtn:active {
  transform: scale(1.1);
  box-shadow: 0 0 25px rgba(255, 77, 109, 0.9);
}

/* NO BUTTON */
#noBtn {
  position: relative;
  z-index: 5;
  background: #f2c1d1;
  color: #6b0036;
}

/* When NO button starts dodging, it becomes fixed position */
#noBtn.dodging {
  position: fixed;
}

.gif {
  max-width: 90%;
  max-height: 300px;
  border-radius: 20px;
  margin-top: 20px;
  object-fit: contain;
}

/* Mobile-specific adjustments */
@media (max-width: 600px) {
  .buttons {
    height: 120px;
    gap: 15px;
  }
  
  .main-text {
    font-size: clamp(24px, 8vw, 48px);
  }
  
  button {
    min-width: 120px; /* Ensure buttons are tappable on mobile */
  }
}

/* Very small screens - stack buttons if needed */
@media (max-width: 350px) {
  .buttons {
    flex-direction: column;
    height: auto;
    gap: 20px;
  }
  
  button {
    width: 100%;
    max-width: 250px;
  }
}
</style>
</head>

<body>

<audio id="bgMusic" loop>
  <source src="/Valentine/music.mp3" type="audio/mpeg">
</audio>

<!-- PAGE 1 -->
<div class="page active" id="page1">
  <div class="main-text" id="typeText"></div>

  <div class="buttons" id="buttons" style="opacity:0;">
    <button id="yesBtn">ðŸ”¥ YES!!!!</button>
    <button id="noBtn">no sorry ðŸ¥º</button>
  </div>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
  <div class="main-text">
    GUYS!!! ðŸ˜­ðŸ”¥<br>
    DID YOU SEE IT??<br>
    SHE SAID YES!!!! ðŸ’–ðŸ’–ðŸ’–
  </div>
  <img class="gif" src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYWRwa3ZkNWo4bWwyN2IzY2tqcDZudzFhaHVwbjB2a2hla2RzYzAzcSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/wbugAxF6ShM3mL7KFJ/giphy.gif">
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
  <div class="main-text">
    Oh no you don't. ðŸ˜¼
  </div>
  <img class="gif" src="https://tenor.com/en-IN/view/sus-cat-sus-cat-suspicious-cat-suspicious-gif-14666859353905804588">
</div>

<script>
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const music = document.getElementById("bgMusic");

let noScale = 1;
let yesScale = 1;
let isDodging = false;

// Start background music on first interaction
function startMusicOnce() {
  music.volume = 0;
  music.play().catch(() => {});
  let vol = 0;
  const fadeIn = setInterval(() => {
    vol += 0.01;
    if (vol >= 0.10) clearInterval(fadeIn);
    music.volume = vol;
  }, 50);
  document.removeEventListener("mousemove", startMusicOnce);
  document.removeEventListener("touchstart", startMusicOnce);
  document.removeEventListener("click", startMusicOnce);
}

// Listen for first interaction
document.addEventListener("mousemove", startMusicOnce, { once: true });
document.addEventListener("touchstart", startMusicOnce, { once: true });
document.addEventListener("click", startMusicOnce, { once: true });

// NO button dodge - works for both mouse and touch
function moveNo(e) {
  // Prevent default touch behavior
  if (e.type === 'touchstart') {
    e.preventDefault();
  }
  
  // Switch to fixed positioning ONCE
  if (!isDodging) {
    const rect = noBtn.getBoundingClientRect();
    isDodging = true;
    noBtn.classList.add('dodging');
    noBtn.style.left = rect.left + "px";
    noBtn.style.top = rect.top + "px";
  }

  const padding = 20;

  const btnWidth = noBtn.offsetWidth * noScale;
  const btnHeight = noBtn.offsetHeight * noScale;

  const maxX = window.innerWidth - btnWidth - padding;
  const maxY = window.innerHeight - btnHeight - padding;

  const x = Math.random() * Math.max(maxX, padding);
  const y = Math.random() * Math.max(maxY, padding);

  noScale *= 0.85;
  yesScale *= 1.1;

  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
  noBtn.style.transform = `scale(${noScale})`;

  yesBtn.style.transform = `scale(${yesScale})`;
}

// Mouse events
noBtn.addEventListener("mouseenter", moveNo);

// Touch events - more reliable on mobile
noBtn.addEventListener("touchstart", moveNo, { passive: false });

// For very persistent users on mobile who manage to tap it
noBtn.addEventListener("click", (e) => {
  if (noScale > 0.3) { // Only dodge if button is still reasonably sized
    e.preventDefault();
    showPage(3);
    setTimeout(() => {
      showPage(1);
      // Reset button states
      isDodging = false;
      noBtn.classList.remove('dodging');
      noBtn.style.position = 'relative';
      noBtn.style.left = '';
      noBtn.style.top = '';
      noScale = 1;
      yesScale = 1;
      noBtn.style.transform = '';
      yesBtn.style.transform = '';
    }, 2000);
  }
});

yesBtn.addEventListener("click", () => {
  showPage(2);
});

function showPage(n) {
  document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
  document.getElementById("page" + n).classList.add("active");
}

const textLines = [
  { text: "Shailly!", small: false },
  { text: "Will you uhhâ€¦ ðŸ˜…", small: false },
  { text: "you know beâ€¦ ðŸ« ", small: false },
  { text: "I mean like beâ€¦ ðŸ˜“", small: false },
  { text: "my uhhhâ€¦", small: false },
  { text: "valentine??ðŸ˜³", small: true }
];

const typeTarget = document.getElementById("typeText");
const buttons = document.getElementById("buttons");

let lineIndex = 0;
let charIndex = 0;
let currentSpan = null;

function typeLine() {
  if (lineIndex >= textLines.length) {
    buttons.style.opacity = 1;
    return;
  }

  if (charIndex === 0) {
    currentSpan = document.createElement("span");
    if (textLines[lineIndex].small) {
      currentSpan.classList.add("small");
    }
    typeTarget.appendChild(currentSpan);
  }

  const lineText = textLines[lineIndex].text;

  if (charIndex < lineText.length) {
    currentSpan.textContent += lineText.charAt(charIndex);
    charIndex++;
    setTimeout(typeLine, 40);
  } else {
    typeTarget.appendChild(document.createElement("br"));
    lineIndex++;
    charIndex = 0;
    setTimeout(typeLine, 500);
  }
}

typeLine();

</script>

</body>
</html>
